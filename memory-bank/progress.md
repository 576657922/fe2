# 项目进度跟踪 (Progress Tracking)

## 阶段 1：基础设施与数据库

### 步骤 1.1：初始化 Next.js 项目
- [ ] 执行 create-next-app 命令
- [ ] 验证项目结构
- [ ] 验证页面加载时间 ≤ 2 秒
- [ ] 验证浏览器控制台无 TypeScript 错误

### 步骤 1.2：安装核心依赖包
- [ ] 安装 @supabase/supabase-js 等库
- [ ] 验证 package.json 中所有依赖
- [ ] 验证项目能正常启动

### 步骤 1.3：安装并初始化 shadcn/ui 组件库
- [ ] 执行 shadcn-ui init 命令
- [ ] 验证 components/ui/ 目录生成
- [ ] 验证项目正常启动

### 步骤 1.4：创建 Supabase 项目
- [ ] 在 Supabase 上创建项目
- [ ] 获取 Project URL
- [ ] 获取 anon public API Key

### 步骤 1.5：配置项目的 Supabase 环境变量
- [ ] 创建 .env.local 文件
- [ ] 添加环境变量
- [ ] 验证环境变量正确

### 步骤 1.6：创建 profiles 表（用户表）
- [ ] 在 Supabase 中创建表
- [ ] 添加所有字段和约束
- [ ] 启用 RLS

### 步骤 1.7：创建 questions 表（题库表）
- [ ] 创建表结构
- [ ] 创建索引
- [ ] 验证表和索引

### 步骤 1.8：创建 user_progress 表（做题记录表）
- [ ] 创建表结构
- [ ] 添加组合索引
- [ ] 启用 RLS

### 步骤 1.9：创建 bookmarks 表（书签表）
- [ ] 创建表结构
- [ ] 添加唯一约束
- [ ] 启用 RLS

### 步骤 1.10：设置 Supabase Auth 认证方式
- [ ] 启用 Email 提供商
- [ ] 配置 GitHub OAuth
- [ ] 验证认证配置

---

## 阶段 2：核心题库与做题流程

### 步骤 2.1：创建 Supabase 客户端初始化文件
- [ ] 创建 lib/supabase.ts
- [ ] 初始化 Supabase 客户端
- [ ] 验证导入无误

### 步骤 2.2：创建全局 TypeScript 类型定义文件
- [ ] 创建 lib/types.ts
- [ ] 定义所有数据类型
- [ ] 验证类型检查通过

### 步骤 2.3：导入示例题目数据到 Supabase
- [ ] 准备题目数据
- [ ] 导入到 questions 表
- [ ] 验证数据完整性

### 步骤 2.4：创建登录页面路由和组件
- [ ] 创建 (auth)/login/page.tsx
- [ ] 设计登录 UI
- [ ] 验证页面显示

### 步骤 2.5：实现邮箱登录功能
- [ ] 添加表单处理逻辑
- [ ] 集成 Supabase Auth
- [ ] 验证登录流程

### 步骤 2.6：实现 GitHub OAuth 登录功能
- [ ] 配置 GitHub OAuth
- [ ] 添加登录按钮处理
- [ ] 验证 OAuth 流程

### 步骤 2.7：创建注册页面
- [ ] 创建 (auth)/register/page.tsx
- [ ] 设计注册 UI
- [ ] 验证页面显示

### 步骤 2.8：实现注册功能
- [ ] 添加表单验证
- [ ] 集成 Supabase Auth
- [ ] 验证注册流程

### 步骤 2.9：创建仪表板基础页面（Dashboard）
- [ ] 创建 (dashboard)/layout.tsx
- [ ] 创建 dashboard/page.tsx
- [ ] 添加导航和保护逻辑
- [ ] 验证仪表板显示

### 步骤 2.10：创建题目浏览页面（Questions Browse）
- [ ] 创建 questions/page.tsx
- [ ] 添加筛选条件
- [ ] 显示题目列表
- [ ] 验证筛选功能

### 步骤 2.11：创建做题页面（Question Detail）
- [ ] 创建 [year]/[questionId]/page.tsx
- [ ] 显示题目信息
- [ ] 添加选项选择
- [ ] 验证做题界面

### 步骤 2.12：实现答案提交逻辑
- [ ] 创建 /api/answers 端点
- [ ] 保存做题记录到数据库
- [ ] 显示做题结果
- [ ] 验证答题流程

---

## 阶段 3：错题本与进度记录

### 步骤 3.1：创建 API 端点 - 获取错题列表
- [ ] 创建 /api/wrong-questions 端点
- [ ] 实现查询逻辑
- [ ] 验证数据返回

### 步骤 3.2：创建错题本页面
- [ ] 创建 wrong-book/page.tsx
- [ ] 显示错题列表
- [ ] 验证错题本显示

### 步骤 3.3：实现"标记已掌握"功能
- [ ] 创建 /api/mark-mastered 端点
- [ ] 添加按钮处理
- [ ] 验证掌握标记

### 步骤 3.4：创建错题复习模式
- [ ] 创建 wrong-review 路由
- [ ] 实现一道一道展示逻辑
- [ ] 验证复习流程

### 步骤 3.5：创建进度统计页面（基础版）
- [ ] 创建 stats/page.tsx
- [ ] 添加统计数据显示
- [ ] 验证统计准确性

### 步骤 3.6：创建书签功能 - 添加书签 API
- [ ] 创建 /api/bookmarks POST 端点
- [ ] 实现添加逻辑
- [ ] 验证书签创建

### 步骤 3.7：创建书签功能 - 删除书签 API
- [ ] 创建 /api/bookmarks DELETE 端点
- [ ] 实现删除逻辑
- [ ] 验证书签删除

### 步骤 3.8：在做题页面添加书签按钮
- [ ] 添加书签按钮
- [ ] 实现按钮逻辑
- [ ] 验证书签交互

### 步骤 3.9：创建书签列表页面
- [ ] 创建 bookmarks/page.tsx
- [ ] 显示书签列表
- [ ] 验证书签列表功能

---

## 阶段 4：番茄钟与基础统计

### 步骤 4.1：创建 Zustand 状态管理 - Pomodoro Store
- [ ] 创建 store/pomodoroStore.ts
- [ ] 定义状态和方法
- [ ] 验证状态管理

### 步骤 4.2：创建 Pomodoro 计时器组件
- [ ] 创建 components/Pomodoro.tsx
- [ ] 设计计时器 UI
- [ ] 验证组件显示

### 步骤 4.3：实现实际的倒计时逻辑
- [ ] 添加 useEffect 钩子
- [ ] 实现倒计时逻辑
- [ ] 验证计时功能

### 步骤 4.4：创建 API 端点 - 保存番茄钟记录
- [ ] 创建 /api/focus-logs 端点
- [ ] 创建 focus_logs 表
- [ ] 实现保存逻辑
- [ ] 验证记录保存

### 步骤 4.5：在仪表板中显示今日概览
- [ ] 修改 dashboard/page.tsx
- [ ] 添加统计信息显示
- [ ] 验证数据更新

### 步骤 4.6：创建经验值和等级系统
- [ ] 定义经验值规则
- [ ] 创建工具函数
- [ ] 验证等级计算

### 步骤 4.7：实现升级提示动画
- [ ] 创建 components/LevelUpNotification.tsx
- [ ] 实现升级动画
- [ ] 验证动画显示

### 步骤 4.8：创建简单的进度可视化
- [ ] 添加图表到 stats/page.tsx
- [ ] 使用 Recharts 绘制图表
- [ ] 验证图表显示

### 步骤 4.9：实现国际化支持（i18n）
- [ ] 安装 next-i18next
- [ ] 创建翻译文件
- [ ] 替换硬编码文本
- [ ] 验证多语言支持

### 步骤 4.10：性能优化 - 图片和代码分割
- [ ] 使用 Next.js Image 组件
- [ ] 添加动态导入
- [ ] 更新配置
- [ ] 验证加载性能

---

## MVP 验收标准

### 用户认证流程
- [ ] 邮箱注册和登录正常
- [ ] GitHub OAuth 登录正常
- [ ] 登出后会话清除

### 题库与做题
- [ ] 题目浏览和筛选正常
- [ ] 做题流程完整
- [ ] 答案保存正确

### 错题本
- [ ] 错题自动收集
- [ ] 错题查看和复习正常
- [ ] 标记掌握功能正常

### 书签功能
- [ ] 添加和删除书签正常
- [ ] 书签列表显示正确

### 番茄钟与统计
- [ ] 番茄计时器工作正常
- [ ] 记录保存正确
- [ ] 仪表板统计数据正确

### 游戏化（基础）
- [ ] XP 增加正确
- [ ] 升级判断正确
- [ ] 升级动画显示

### 性能与适配
- [ ] 首页加载 ≤ 2 秒
- [ ] 移动端显示正常
- [ ] 桌面端显示正常

### 数据安全
- [ ] RLS 策略生效
- [ ] 用户隐私保护

---

## 注释说明

- 完成某个步骤后，在对应的 checkbox 中打 ✓
- 遇到问题可在对应步骤下添加备注
- 记录每个阶段的完成时间
- 跟踪所有待办事项和阻塞问题
